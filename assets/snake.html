<!DOCTYPE html>
<html>
<head>
    <style>
        #game-board {
            position: relative;
            width: 400px;
            height: 400px;
            border: 1px solid black;
        }

        .cell {
            width: 20px;
            height: 20px;
            border: 1px solid gray;
            box-sizing: border-box;
            background-color: #f0f0f0;
            position: absolute;
        }

        .food {
            background-color: red;
        }
    </style>
</head>
<body>
    <div id="game-board"></div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const gameBoard = document.getElementById('game-board');
            const boardSize = 20;
            const cellSize = 20;
            const initialSnakeLength = 5;
            let snake = [];
            let food = null;
            let direction = 'right';

            function createBoard() {
                for (let row = 0; row < boardSize; row++) {
                    for (let col = 0; col < boardSize; col++) {
                        const cell = document.createElement('div');
                        cell.classList.add('cell');
                        cell.style.top = row * cellSize + 'px';
                        cell.style.left = col * cellSize + 'px';
                        gameBoard.appendChild(cell);
                    }
                }
            }

            function createSnake() {
                snake = [];
                for (let i = 0; i < initialSnakeLength; i++) {
                    snake.push({ x: i, y: 0 });
                }
            }

            function drawSnake() {
                snake.forEach(segment => {
                    const cell = document.createElement('div');
                    cell.classList.add('cell');
                    cell.style.top = segment.y * cellSize + 'px';
                    cell.style.left = segment.x * cellSize + 'px';
                    gameBoard.appendChild(cell);
                });
            }

            function clearBoard() {
                const cells = gameBoard.querySelectorAll('.cell');
                cells.forEach(cell => cell.remove());
            }

            function getRandomPosition() {
                const x = Math.floor(Math.random() * boardSize);
                const y = Math.floor(Math.random() * boardSize);
                return { x, y };
            }

            function createFood() {
                const position = getRandomPosition();
                food = position;
                const foodCell = document.createElement('div');
                foodCell.classList.add('cell', 'food');
                foodCell.style.top = position.y * cellSize + 'px';
                foodCell.style.left = position.x * cellSize + 'px';
                gameBoard.appendChild(foodCell);
            }

            function update() {
                const head = { ...snake[0] };

                switch (direction) {
                    case 'up':
                        head.y -= 1;
                        break;
                    case 'down':
                        head.y += 1;
                        break;
                    case 'left':
                        head.x -= 1;
                        break;
                    case 'right':
                        head.x += 1;
                        break;
                }

                snake.unshift(head);

                if (head.x === food.x && head.y === food.y) {
                    createFood();
                } else {
                    snake.pop();
                }
            }

            function checkCollision() {
                const head = snake[0];

                if (
                    head.x < 0 ||
                    head.x >= boardSize ||
                    head.y < 0 ||
                    head.y >= boardSize ||
                    snake.slice(1).some(segment => segment.x === head.x && segment.y === head.y)
                ) {
                    return true;
                }

                return false;
            }

            function handleKeyPress(event) {
                const key = event.key;

                if (key === 'ArrowUp' && direction !== 'down') {
                    direction = 'up';
                } else if (key === 'ArrowDown' && direction !== 'up') {
                    direction = 'down';
                } else if (key === 'ArrowLeft' && direction !== 'right') {
                    direction = 'left';
                } else if (key === 'ArrowRight' && direction !== 'left') {
                    direction = 'right';
                }
            }

            function gameLoop() {
                clearBoard();
                update();
                if (checkCollision()) {
                    clearInterval(gameInterval);
                    alert('Game Over!');
                    return;
                }
                drawSnake();
            }

            createBoard();
            createSnake();
            createFood();
            drawSnake();
            const gameInterval = setInterval(gameLoop, 200);
            document.addEventListener('keydown', handleKeyPress);
        });
    </script>
</body>
</html>
